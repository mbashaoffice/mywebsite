try {
                long userId=UserLocalServiceUtil.authenticateForBasic(themeDisplay.getCompanyId(), "emailAddress", themeDisplay.getUser().getEmailAddress(), current);
                if(themeDisplay.getUserId()!=userId)
                {
                    throw new Exception("Invalid current password.");
                }
                if(!password1.equals(password2))
                {
                    throw new Exception("Please confirm new password.");
                }
                UserLocalServiceUtil.updatePassword(userId, password1, password2, false);
			}